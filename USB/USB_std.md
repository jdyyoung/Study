USB，是英文Universal Serial Bus（通用串行总线）的缩写



D+\D-是极性相反的两根数据线，一根是正极性，另一根是负极性。这两构成是差分接口，可以减小干扰。

V：5V+
G：5V－
D+/D-：信号线

DATA + DATA-分别表示数据+和数据-,是两根数据信号线

把红色的线接在USB电源上，白色的线（带一个“－”号）接在USB数据负线上，绿色的线（带一个“＋”号）接在USB数据正线上，最后接上黑色的接地线。注意的是，在一排上接的两根USB正、负数据线上的数字要相同。

---

USB里的D+D_是什么用?_ ： USB信号是差分信号,用一对线传输一个信号,D+和D-应该就是这样的一对差分信号,负责传输Data信号即数据.所谓差分信号的意思是当要传输高电平时,一根线(比如是D+)送的是高电平,而另一根配对的线上传输的是低电平,要送低电平时,D+送低,D-送高,这样两根线上送的信号相位是反的,这样可以提高抗干扰的能力,从而能提高数据传输的速率.



---

USB 的D+D_是多少 ： 他们在0-3.3V范围.电压差值不确定,随通信情况变化.低速设备和全速设备D+和D-的上拉电阻不同.

USB规范中规定数据线D+和D_上的电平范围 ： 电源线是5V,为USB设备提供最大500MA的电流,它与数据线上的电平 无关,数据线是差分信号,通常D+和D-在+400mV~-400mV间变化

```
差分信号与传统的一根信号线一根地线（即单端信号）走线的做法相比，其优缺点分别是：
优点
1、抗干扰能力强。干扰噪声一般会等值、同时的被加载到两根信号线上，而其差值为0，即，噪声对信号的逻辑意义不产生影响。
2、能有效抑制电磁干扰（EMI）。由于两根线靠得很近且信号幅值相等，这两根线与地线之间的耦合电磁场的幅值也相等，同时他们的信号极性相反，其电磁场将相互抵消。因此对外界的电磁干扰也小。
3、时序定位准确。差分信号的接受端是两根线上的信号幅值之差发生正负跳变的点，作为判断逻辑0/1跳变的点的。而普通单端信号以阈值电压作为信号逻辑0/1的跳变点，受阈值电压与信号幅值电压之比的影响较大，不适合低幅度的信号。
缺点
若电路板的面积非常紧张，单端信号可以只有一根信号线，地线走地平面，而差分信号一定要走两根等长、等宽、紧密靠近、且在同一层面的线。这样的情况常常发生在芯片的管脚间距很小，以至于只能穿过一根走线的情况下。 
```

```
USB 总线作为一种高速串行总线，其极高的传输速度可以满足高速数据传输的应用环境要求，且该总线还兼有供电简单（可总线供电）、安装配置便捷（支持即插即用和热插拔）、 扩展端口简易（通过集线器最多可扩展127 个外设）、传输方式多样化（4 种传输模式），以及兼容良好（产品升级后向下兼容）等优点。
```

```
D+和D-是数据线。
USB属于差分传输数据的，D+和D-之间的电平大于某个值代表1，D+和D-之间的电平小于某个值代表0。这个两根线必须同时工作
```

USB的NRZI信号格式-百度经验 - https://jingyan.baidu.com/article/39810a23addccbb637fda66a.html

(1条消息)USB的数据格式概述_* . Benirus的专栏-CSDN博客_atkp数据格式 - https://blog.csdn.net/u011318735/article/details/17788769

[USB波形分析] 全速USB波形数据分析(一) - Mr.Bike - 博客园 - https://www.cnblogs.com/mr-bike/p/11674590.html

USB之基本协议和数据波形1 - 爱码网 - http://www.likecs.com/show-59814.html

---

包(packet)是USB转输中的基本单位,每一个包前面都有一个PID字段,这个字段表明包是什么类开.包总共分以下几种:包ID字段为8位,前4位标识这个包的类别,后4位为效验,前4位的类别为在数据传输过程中,数据包是最多的.因此协议规定,数据包每两个包前面要带不同的PID,据说这样可以起到帧同步的作用.至于数据内容,则与包的类型是DATA0和DATA1无关.比如说我要发送一段数据,而这些数据在分成2个包,那么前一半的数据,由于加上了DATA0的PID,就叫DATA0包.后面的加上了DATA1的PID,就叫DATA1包.



多个IN或OUT事务接连发生时，通常会DATA0和DATA1包交换使用，它们只是PID字段不同，没有区它区别。

---

1、RZ 编码（Return-to-zero Code），也叫归零编码。

​		特点：自同步，浪费带宽。

2、NRZ 编码（Non-return-to-zero Code），也叫不归零编码。

​		特点：失去自同步，省带宽

3、NRZI 编码（Non-Return-to-Zero Inverted Code），也叫反向不归零编码。

在USB传输的编码中采用的是NRZI格式，电平翻转代表逻辑0，电平不变代表1。

在USB中，每个数据包的最开始处都有一个**同步域**（SYNC），其值为00000001，在经过NRZI编码后，就是一串方波，接收方可能过这个同步头来计算发送方的频率，以便用这个频率来继续采样数据信号。

由于USB所采用的NRZI编码中，每当逻辑0时就会进行电平翻转，那么接收方可通过这个不断翻转的信号来调整同步的频率，保证数据的正确传输。

![20200628005046](.\md_att\20200628005046.jpg)

USB中采用了Bit-Stuffing位填充处理，即在连续发送6个1后面会插入1个0，强制使发送信号进行翻转，从而让接收方调整频率，同步接收。而接收方在接收时只要接收到连续的6个1后，直接将后面的0删除即可恢复数据的原貌。

---



Linux 下usb万能调试驱动-lpven-ChinaUnix博客 - http://blog.chinaunix.net/uid-27083042-id-3278847.html